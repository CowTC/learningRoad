1. 目的
	Scrapy抓取数据进入Mysql

2. 版本号

	2.1) scrapy.__version__==1.1.1

	2.2) MySQLdb.__version__==1.2.5

3. 做法

	抓取得到的结果是在spider中的pipelines.py中处理的，抓到Mysql也不例外。

	3.1 pipelines.py

		#-*- coding: utf-8 -*-
		import MySQLdb

		#编码方式用
		import sys
		reload(sys)
		sys.setdefaultencoding('utf-8')

		class TestPipeline(object):
		con= None
		def __init__(self):

			#进行Mysql连接和获取连接指针
			self.con= MySQLdb.connect(host="localhost",user="root",passwd="root123",db="airtickets",charset="utf8")
			self.cur= self.con.cursor()

		def process_item(self, item, spider):

			#Insert Sql语句
			sqlInsert= "insert into airTicCom(cname) "+ "values(' "+ item['name']+" ')"

			#进行insertSql操作
			try:
				self.cur.execute(sqlInsert)
			except Exception, e:
				print "!"*128
				print "The SQL Insert ERROR", sqlInsert
				print "!"*128
				self.con.rollback()
			else:
				self.con.commit()

		def close_spider(self):
			#关闭数据库链接
			self.con.close()
			self.cur.close()
